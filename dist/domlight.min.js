!function(t,e){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(["exports","require"],function(){return e()}):t.Domlight=e()}(window,function(){var t=function(t){this.highlights=[],this.options={},this.idCounter=0;for(var e in this.constructor.defaultOptions)this.options[e]=this.constructor.defaultOptions[e];for(var e in t)this.options[e]=t[e]};return t.defaultOptions={borderWidth:3,borderColor:"rgba(255, 0, 0, 0.7)",backgroundColor:"rgba(255, 0, 0, 0)"},t.prototype.highlight=function(t){this.unlight(t);var e=this.createHighlightElement(this.computePosition(t),this.options);document.querySelector("body").appendChild(e),this.highlights.push({element:t,highlight:e})},t.prototype.highlightAll=function(t){for(var e=0;e<t.length;e++)this.highlight(t[e])},t.prototype.unlight=function(t){var e=this.getHighlightIndex(t);null!==e&&(document.querySelector("body").removeChild(this.highlights[e].highlight),this.highlights[e]=null)},t.prototype.unlightAll=function(t){for(var e=0;e<t.length;e++)this.unlight(t[e])},t.prototype.getHighlightIndex=function(t){for(var e=0;e<this.highlights.length;e++)if(this.highlights[e]&&this.highlights[e].element===t)return e;return null},t.prototype.computePosition=function(t){var e=document.createRange();e.selectNode(t);var i=e.getBoundingClientRect(),o=window.pageXOffset+i.left,n=window.pageYOffset+i.top;return{x1:o,x2:o+i.width,y1:n,y2:n+i.height}},t.prototype.createHighlightElement=function(t,e){var i=this,o=document.createElement("div");return o.className="domlight__highlight",o.id="domlight__highlight__"+this.idCounter,this.idCounter++,o.appendChild(document.createTextNode(" ")),o.style.borderWidth=e.borderWidth+"px",o.style.borderColor=e.borderColor,o.style.borderStyle="solid",o.style.backgroundColor=e.backgroundColor,o.style.position="absolute",o.style.left=t.x1-e.borderWidth+"px",o.style.top=t.y1-e.borderWidth+"px",o.style.width=t.x2-t.x1+"px",o.style.height=t.y2-t.y1+"px",o.addEventListener("mousemove",function(t){i.hideHighlights();var e=document.elementFromPoint(t.clientX,t.clientY);i.fireEvent(e,"mousemove"),i.showHighlights()}),o.addEventListener("click",function(t){console.log("domlight click first",t),i.hideHighlights();var e=document.elementFromPoint(t.clientX,t.clientY);i.fireEvent(e,"click"),i.showHighlights()},!1),o},t.prototype.hideHighlights=function(){for(var t=document.querySelectorAll(".domlight__highlight"),e=t.length-1;e>=0;e--)t[e].style.display="none"},t.prototype.showHighlights=function(){for(var t=document.querySelectorAll(".domlight__highlight"),e=t.length-1;e>=0;e--)t[e].style.display="block"},t.prototype.fireEvent=function(t,e){if(document.createEvent){var i=document.createEvent("HTMLEvents");return i.initEvent(e,!0,!0),!t.dispatchEvent(i)}var i=document.createEventObject();return t.fireEvent("on"+e,i)},t});